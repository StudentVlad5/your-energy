import{a as me,i as re}from"./vendor-3BNOZKAJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();(()=>{const e={openMenuBtn:document.querySelector("[data-menu-open]"),closeMenuBtn:document.querySelector("[data-menu-close]"),menu:document.querySelector("[data-menu]")};if(!e.openMenuBtn||!e.menu||!e.closeMenuBtn)return;const t=()=>{e.menu.classList.toggle("is-open"),document.body.classList.toggle("menu-open")};e.openMenuBtn.addEventListener("click",t),e.closeMenuBtn.addEventListener("click",t),window.matchMedia("(min-width: 768px)").addEventListener("change",n=>{n.matches&&(e.menu.classList.remove("is-open"),document.body.classList.remove("menu-open"))})})();const q=document.querySelector("[data-filters-tabs]"),V=document.querySelector(".filters__search"),Y=document.querySelector(".filters__subtitle");q&&q.addEventListener("click",e=>{const t=e.target.closest(".filters__tab");if(!t)return;q.querySelectorAll(".filters__tab").forEach(i=>{const o=i===t;i.classList.toggle("filters__tab--active",o),i.setAttribute("aria-selected",o?"true":"false")}),t.dataset.filter==="bodypart"?(V.classList.remove("hidden"),Y.textContent=" / Waist"):(V.classList.add("hidden"),Y.textContent="")});const v={loaderOverlay:document.getElementById("loader-overlay"),loaderBg:document.getElementById("bg-loader")};function j(){v.loaderOverlay&&v.loaderOverlay.classList.add("hidden"),v.loaderBg&&v.loaderBg.classList.remove("bg-loader")}let c=null,J=!1;const w={};function fe(e,t,n){w[e]={getContent:t,init:n}}function A(){J||(c={modal:document.getElementById("modal-template"),backdrop:document.querySelector("[data-modal-close]"),closeBtn:document.querySelector(".modal-template__close-btn"),body:document.querySelector("[data-modal-body]")},J=!0)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{A()}):A();function Ee(){document.querySelectorAll("[data-modal]").forEach(t=>{if(t.hasAttribute("data-modal-initialized"))return;const n=t.getAttribute("data-modal");if(!w[n]){console.warn(`Modal type "${n}" is not registered`);return}t.addEventListener("click",()=>{const{getContent:i,init:o}=w[n],r=i();if(!r){console.error(`Failed to get content for modal type "${n}"`);return}ge(r),o&&setTimeout(async()=>{try{await o(M)}catch(a){console.error("Error initializing modal:",a)}},100)}),t.setAttribute("data-modal-initialized","true")})}function ge(e){var t,n;if(A(),!c||!c.modal||!c.body){console.error("Modal template elements not found");return}if(typeof e=="string")c.body.innerHTML=e;else if(e instanceof HTMLElement)c.body.innerHTML="",c.body.appendChild(e);else{console.error("Invalid content type. Expected string or HTMLElement");return}c.modal.classList.remove("hidden"),document.body.classList.add("modal-open"),document.addEventListener("keydown",ie,{once:!1}),(t=c.backdrop)==null||t.addEventListener("click",ae),(n=c.closeBtn)==null||n.addEventListener("click",se)}function M(){var e,t;A(),!(!c||!c.modal)&&(c.modal.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",ie),(e=c.backdrop)==null||e.removeEventListener("click",ae),(t=c.closeBtn)==null||t.removeEventListener("click",se),c&&c.body&&(c.body.innerHTML=""))}function P(){const e=document.getElementById("modal-confirm");return e&&!e.classList.contains("hidden")}function ie(e){if(e.key==="Escape"){if(P())return;M()}}function ae(e){if(e.target===c.backdrop){if(P())return;M()}}function se(){P()||M()}const m={WHITE:"#fff",BLACK:"#000",GRAY_LIGHT:"#808080"},T={FILTERS:"/filters",EXERCISES:"/exercises",QUOTE:"/quote",SUBSCRIPTION:"/subscription"},pe={EMAIL:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},h={EMAIL_REGEX:pe.EMAIL,RATING_MIN:1,RATING_MAX:5},g={POSITION:{TOP_RIGHT:"topRight",TOP_LEFT:"topLeft",TOP_CENTER:"topCenter",BOTTOM_RIGHT:"bottomRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_CENTER:"bottomCenter"},TIMEOUT:{SHORT:2e3,DEFAULT:4e3,LONG:6e3},TRANSITION:{IN:"fadeInLeft",OUT:"fadeOutRight"},TITLE:{SUCCESS:"OK",ERROR:"Error",INFO:"Info",WARNING:"Warning"},ICON:{SUCCESS:"icon-check",ERROR:"icon-error",INFO:"icon-info",WARNING:"icon-warning"}},Ie={RATING:"rating",EXERCISE:"exercise"},L={API_ERROR:"Something went wrong",EMAIL_REQUIRED:"Valid email is required",RATING_RANGE:`Rating must be between ${h.RATING_MIN} and ${h.RATING_MAX}`,EXERCISE_ID_REQUIRED:"Exercise ID is required"},ye={BASE_API_URL:"https://your-energy.b.goit.study/api",DEV_HOST:"127.0.0.1",DEV_PORT:"3000",BASE_PATH:"/your-energy/"};class Le{constructor(t=ye.BASE_API_URL){this.baseURL=t,this.axios=me.create({baseURL:this.baseURL}),this.axios.interceptors.response.use(n=>n,n=>{var o,r;const i=((r=(o=n.response)==null?void 0:o.data)==null?void 0:r.message)||n.message||L.API_ERROR;return console.error("API Error:",i),Promise.reject(n)})}async _request(t,n,i=null,o=null){var r,a;try{const u={method:t,url:n};return i&&(u.data=i),o&&(u.params=o),(await this.axios(u)).data}catch(u){const d=((a=(r=u.response)==null?void 0:r.data)==null?void 0:a.message)||u.message;throw new Error(`${t.toUpperCase()} ${n} failed: ${d}`)}}async getFilters(t={}){return this._request("get",T.FILTERS,null,t)}async getExercises(t={}){return this._request("get",T.EXERCISES,null,t)}async getExerciseById(t){if(!t)throw new Error(L.EXERCISE_ID_REQUIRED);return this._request("get",`${T.EXERCISES}/${t}`)}async getQuote(){return this._request("get",T.QUOTE)}async subscribe(t){if(!t.email||!h.EMAIL_REGEX.test(t.email))throw new Error(L.EMAIL_REQUIRED);return this._request("post",T.SUBSCRIPTION,t)}async rateExercise(t,n){if(!t)throw new Error(L.EXERCISE_ID_REQUIRED);if(!n.rate||n.rate<h.RATING_MIN||n.rate>h.RATING_MAX)throw new Error(L.RATING_RANGE);if(!n.email||!h.EMAIL_REGEX.test(n.email))throw new Error(L.EMAIL_REQUIRED);return this._request("patch",`${T.EXERCISES}/${t}/rating`,n)}}const ce={position:g.POSITION.TOP_RIGHT,timeout:g.TIMEOUT.DEFAULT,close:!0,closeOnEscape:!0,pauseOnHover:!0,progressBar:!0,progressBarColor:m.GRAY_LIGHT,transitionIn:g.TRANSITION.IN,transitionOut:g.TRANSITION.OUT,fontFamily:"inherit",icon:""},Re=e=>{re.show({...ce,title:g.TITLE.SUCCESS,message:e,backgroundColor:m.BLACK,titleColor:m.WHITE,messageColor:m.WHITE,icon:g.ICON.SUCCESS,iconColor:m.WHITE})},N=e=>{re.show({...ce,title:g.TITLE.ERROR,message:e,backgroundColor:m.BLACK,titleColor:m.WHITE,messageColor:m.GRAY_LIGHT,progressBarColor:m.WHITE,icon:g.ICON.ERROR,iconColor:m.WHITE})};let l=null,G=null,D=null;function x(){var t,n,i,o,r,a;if(l)return;const e=document.getElementById("modal-confirm");if(!e){console.error("Confirm modal not found");return}l={modal:e,backdrop:e.querySelector("[data-confirm-close]"),message:e.querySelector("[data-confirm-message]"),cancelBtn:e.querySelector("[data-confirm-cancel]"),confirmBtn:e.querySelector("[data-confirm-ok]")},(t=l.backdrop)==null||t.removeEventListener("click",Z,{capture:!0}),(n=l.cancelBtn)==null||n.removeEventListener("click",O,{capture:!0}),(i=l.confirmBtn)==null||i.removeEventListener("click",ee,{capture:!0}),(o=l.backdrop)==null||o.addEventListener("click",Z,{capture:!0}),(r=l.cancelBtn)==null||r.addEventListener("click",O,{capture:!0}),(a=l.confirmBtn)==null||a.addEventListener("click",ee,{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",x):x();function Se(e){e.key==="Escape"&&l&&!l.modal.classList.contains("hidden")&&O()}function Z(e){e.target===l.backdrop&&(e.stopPropagation(),e.preventDefault(),O(e))}function O(e){e&&(e.stopPropagation(),e.preventDefault());const t=D;le(),t&&t()}function ee(e){e&&(e.stopPropagation(),e.preventDefault());const t=G;le(),setTimeout(()=>{t&&t()},0)}function Te(e,t,n=null){if(x(),!l||!l.modal){console.error("Confirm modal elements not found");return}G=t,D=n,l.message&&(l.message.textContent=e),l.modal.classList.remove("hidden"),document.addEventListener("keydown",Se,{once:!0})}function le(){!l||!l.modal||(l.modal.classList.add("hidden"),G=null,D=null)}const he=new Le;let R=null;function Ce(){const e=document.querySelector(".rating-modal");if(!e)return console.error("Rating modal HTML not found. Make sure modal-rating.html is loaded via <load> tag."),null;const t=e.cloneNode(!0);return _e(t),t}function te(){document.addEventListener("click",function(e){const t=e.target.closest('[data-modal="rating"]');if(t){const n=t.getAttribute("data-exercise-id");n&&sessionStorage.setItem("ratingModalExerciseId",n)}},{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",te):te();function _e(e){const t=e.querySelectorAll("[id]"),n=Date.now();t.forEach(i=>{const o=i.id;i.id=`${o}-${n}`,e.querySelectorAll(`label[for="${o}"]`).forEach(a=>{a.setAttribute("for",i.id)})})}function ne(){const e=document.querySelector("[data-modal-body]"),t=e==null?void 0:e.querySelector(".rating-modal");if(!t)return;const n=t.querySelector(".rating-modal__form"),i=t.querySelector('input[name="rating"]'),o=t.querySelector(".rating-modal__rating-text"),r=t.querySelector('input[name="email"]'),a=t.querySelector('textarea[name="comment"]'),u=t.querySelectorAll(".rating-star");n&&n.reset(),i&&(i.value="0"),r&&(r.value=""),a&&(a.value=""),o&&(o.textContent=""),u.forEach(d=>{d.classList.remove("active")})}function B(e){R&&R()?Te("Are you sure you want to cancel your exercise review?",()=>{ne(),R=null,e()},()=>{}):(ne(),R=null,e())}function be(e){var Q;R=null;const t=document.querySelector("[data-modal-body]"),n=t==null?void 0:t.querySelector(".rating-modal");if(!t||!n){console.error("Modal body or rating modal not found");return}let i=sessionStorage.getItem("ratingModalExerciseId")||((Q=document.querySelector('[data-modal="rating"][data-exercise-id]'))==null?void 0:Q.getAttribute("data-exercise-id"));if(i&&sessionStorage.removeItem("ratingModalExerciseId"),!i){N("Exercise ID is missing");return}const o=n.querySelectorAll(".rating-star"),r=n.querySelector('input[name="rating"]'),a=n.querySelector(".rating-modal__rating-text"),u=n.querySelector(".rating-modal__btn--cancel"),d=n.querySelector('.rating-modal__btn[type="submit"]'),p=n.querySelector('input[name="email"]'),I=n.querySelector('textarea[name="comment"]'),C=n.querySelector(".rating-modal__form");let _=0;d&&(d.disabled=!0),r&&(r.value="0"),a&&(a.textContent="0");const U=()=>_>0&&_<=5&&(p==null?void 0:p.value.trim())!==""&&(I==null?void 0:I.value.trim())!=="",H=()=>{d&&(d.disabled=!U())};R=()=>_>0||(p==null?void 0:p.value.trim())!==""||(I==null?void 0:I.value.trim())!=="";const de=s=>{o.forEach((f,E)=>{E+1<=s?f.classList.add("active"):f.classList.remove("active")})};o.forEach((s,f)=>{const E=f+1;s.addEventListener("click",()=>{_=E,de(E),r&&(r.value=E),a&&(a.textContent=E),H()})}),[p,I].forEach(s=>{s&&s.addEventListener("input",H)});const y=document.querySelector("[data-modal-close]"),k=()=>{const s=document.getElementById("modal-confirm");return s&&!s.classList.contains("hidden")},F=s=>{if(s.key==="Escape"){if(k())return;s.stopPropagation(),B(()=>{b(),e()})}},$=s=>{if(s.target===y){if(k())return;s.stopPropagation(),B(()=>{b(),e()})}},b=()=>{document.removeEventListener("keydown",F,{capture:!0}),y==null||y.removeEventListener("click",$,{capture:!0}),S==null||S.removeEventListener("click",X,{capture:!0})},S=document.querySelector(".modal-template__close-btn"),X=s=>{k()||(s.stopPropagation(),W())};document.addEventListener("keydown",F,{capture:!0}),y==null||y.addEventListener("click",$,{capture:!0}),S==null||S.addEventListener("click",X,{capture:!0});const W=()=>{B(()=>{b(),e()})};u&&e&&u.addEventListener("click",()=>{W()}),C&&(C.setAttribute("data-no-auto-close","true"),C.addEventListener("submit",async s=>{if(s.preventDefault(),!U()){N("Please fill in all fields");return}const f=new FormData(C),E=parseInt(f.get("rating"),10),z=f.get("email").trim(),ue=f.get("comment").trim();d&&(d.disabled=!0,d.textContent="Sending...");try{await he.rateExercise(i,{rate:E,email:z,review:ue}),Re("Thank you for your feedback!"),R=null,setTimeout(()=>{e&&(b(),e())},1e3)}catch(K){console.error("Failed to submit rating:",K),N(K.message||L.API_ERROR),d&&(d.disabled=!1,d.textContent="Send")}}))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{j(),oe()}):(j(),oe());function oe(){fe(Ie.RATING,Ce,be),Ee()}
//# sourceMappingURL=main-COdEKpdt.js.map
