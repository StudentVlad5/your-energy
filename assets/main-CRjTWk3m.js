import{a as Te,i as ue}from"./vendor-3BNOZKAJ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const Re={BASE_API_URL:"https://your-energy.b.goit.study/api",DEV_HOST:"127.0.0.1",DEV_PORT:"3000",BASE_PATH:"/your-energy/"},m={WHITE:"#fff",BLACK:"#000",GRAY_LIGHT:"#808080"},R={FILTERS:"/filters",EXERCISES:"/exercises",QUOTE:"/quote",SUBSCRIPTION:"/subscription"},he={EMAIL:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},h={EMAIL_REGEX:he.EMAIL,RATING_MIN:1,RATING_MAX:5},p={POSITION:{TOP_RIGHT:"topRight",TOP_LEFT:"topLeft",TOP_CENTER:"topCenter",BOTTOM_RIGHT:"bottomRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_CENTER:"bottomCenter"},TIMEOUT:{SHORT:2e3,DEFAULT:4e3,LONG:6e3},TRANSITION:{IN:"fadeInLeft",OUT:"fadeOutRight"},TITLE:{SUCCESS:"OK",ERROR:"Error",INFO:"Info",WARNING:"Warning"},ICON:{SUCCESS:"icon-check",ERROR:"icon-error",INFO:"icon-info",WARNING:"icon-warning"}},_={SCHEMA_CONTEXT:"https://schema.org",SCHEMA_TYPES:{ITEM_LIST:"ItemList",LIST_ITEM:"ListItem",EXERCISE_PLAN:"ExercisePlan"},JSON_LD_TYPE:"application/ld+json"},Ce={RATING:"rating",EXERCISE:"exercise"},g={API_ERROR:"Something went wrong",EMAIL_REQUIRED:"Valid email is required",RATING_RANGE:`Rating must be between ${h.RATING_MIN} and ${h.RATING_MAX}`,EXERCISE_ID_REQUIRED:"Exercise ID is required"};class U{constructor(t=Re.BASE_API_URL){this.baseURL=t,this.axios=Te.create({baseURL:this.baseURL}),this.axios.interceptors.response.use(n=>n,n=>{var o,i;const r=((i=(o=n.response)==null?void 0:o.data)==null?void 0:i.message)||n.message||g.API_ERROR;return console.error("API Error:",r),Promise.reject(n)})}async _request(t,n,r=null,o=null){var i,a;try{const u={method:t,url:n};return r&&(u.data=r),o&&(u.params=o),(await this.axios(u)).data}catch(u){const d=((a=(i=u.response)==null?void 0:i.data)==null?void 0:a.message)||u.message;throw new Error(`${t.toUpperCase()} ${n} failed: ${d}`)}}async getFilters(t={}){return this._request("get",R.FILTERS,null,t)}async getExercises(t={}){return this._request("get",R.EXERCISES,null,t)}async getExerciseById(t){if(!t)throw new Error(g.EXERCISE_ID_REQUIRED);return this._request("get",`${R.EXERCISES}/${t}`)}async getQuote(){return this._request("get",R.QUOTE)}async subscribe(t){if(!t.email||!h.EMAIL_REGEX.test(t.email))throw new Error(g.EMAIL_REQUIRED);return this._request("post",R.SUBSCRIPTION,t)}async rateExercise(t,n){if(!t)throw new Error(g.EXERCISE_ID_REQUIRED);if(!n.rate||n.rate<h.RATING_MIN||n.rate>h.RATING_MAX)throw new Error(g.RATING_RANGE);if(!n.email||!h.EMAIL_REGEX.test(n.email))throw new Error(g.EMAIL_REQUIRED);return this._request("patch",`${R.EXERCISES}/${t}/rating`,n)}}const me={position:p.POSITION.TOP_RIGHT,timeout:p.TIMEOUT.DEFAULT,close:!0,closeOnEscape:!0,pauseOnHover:!0,progressBar:!0,progressBarColor:m.GRAY_LIGHT,transitionIn:p.TRANSITION.IN,transitionOut:p.TRANSITION.OUT,fontFamily:"inherit",icon:""},_e=e=>{ue.show({...me,title:p.TITLE.SUCCESS,message:e,backgroundColor:m.BLACK,titleColor:m.WHITE,messageColor:m.WHITE,icon:p.ICON.SUCCESS,iconColor:m.WHITE})},C=e=>{ue.show({...me,title:p.TITLE.ERROR,message:e,backgroundColor:m.BLACK,titleColor:m.WHITE,messageColor:m.GRAY_LIGHT,progressBarColor:m.WHITE,icon:p.ICON.ERROR,iconColor:m.WHITE})},Ae=new U,M={content:document.querySelector(".js-quote-content"),author:document.querySelector(".js-quote-author")};function ve(){const e=localStorage.getItem("quoteData");if(e){const{quote:t,author:n,date:r}=JSON.parse(e),o=new Date(r),i=new Date;if(o.getDate()===i.getDate()){fe(t,n);return}}be()}ve();async function be(){try{const e=await Ae.getQuote(),{quote:t,author:n}=e,r={quote:t,author:n,date:new Date};localStorage.setItem("quoteData",JSON.stringify(r)),fe(t,n)}catch(e){C(e.message||g.API_ERROR)}}function fe(e,t){M.content&&(M.content.textContent=e),M.author&&(M.author.textContent=t)}function te(e){const t={"@context":_.SCHEMA_CONTEXT,"@type":_.SCHEMA_TYPES.ITEM_LIST,itemListElement:e==null?void 0:e.results.map((r,o)=>({"@type":_.SCHEMA_TYPES.LIST_ITEM,position:o+1,item:{"@type":_.SCHEMA_TYPES.EXERCISE_PLAN,name:r.name,filter:r.filter,image:r.imgURL}}))};let n=document.querySelector('script[data-schema="exercises"]');n||(n=document.createElement("script"),n.type=_.JSON_LD_TYPE,n.setAttribute("data-schema","exercises"),document.head.appendChild(n)),n&&(n.textContent=JSON.stringify(t))}const Oe=new U,$=window.innerWidth<768?9:12;let N="Muscles",A=1;async function Ee(e=N,t=1,n=$){N=e,A=t;try{const r={filter:e,page:t,limit:n},o=await Oe.getFilters(r);if(!o)return C("Data is empty");Me(o.results||[]),qe(A,o.totalPages||1),typeof te=="function"&&te(o)}catch(r){console.error("getCategories error:",r),C((r==null?void 0:r.message)||"Something went wrong")}}function Me(e){const t=document.getElementById("cards-container");t&&(t.innerHTML="",e.forEach(n=>{const r=document.createElement("div");r.className="card",r.innerHTML=`
      <img src="${n.imgURL}" alt="${n.name}" />
      <div class="card-body">
        <h3>${n.name}</h3>
        <span class="card-filter">${n.filter}</span>
      </div>
    `,t.appendChild(r)}))}function qe(e,t){const n=document.getElementById("pagination");if(n){n.innerHTML="";for(let r=1;r<=t;r++){const o=r,i=document.createElement("button");i.textContent=o,i.className="pagination-page",i.setAttribute("data-page",o),o===e&&i.classList.add("active"),i.addEventListener("click",()=>{o!==A&&(A=o,Ee(N,o,$),window.scrollTo({top:0,behavior:"smooth"}))}),n.appendChild(i)}}}Ee(N,A,$);(()=>{const e={openMenuBtn:document.querySelector("[data-menu-open]"),closeMenuBtn:document.querySelector("[data-menu-close]"),menu:document.querySelector("[data-menu]")};if(!e.openMenuBtn||!e.menu||!e.closeMenuBtn)return;const t=()=>{e.menu.classList.toggle("is-open"),document.body.classList.toggle("menu-open")};e.openMenuBtn.addEventListener("click",t),e.closeMenuBtn.addEventListener("click",t),window.matchMedia("(min-width: 768px)").addEventListener("change",n=>{n.matches&&(e.menu.classList.remove("is-open"),document.body.classList.remove("menu-open"))})})();const x=document.querySelector("[data-filters-tabs]"),ne=document.querySelector(".filters__search"),oe=document.querySelector(".filters__subtitle");x&&x.addEventListener("click",e=>{const t=e.target.closest(".filters__tab");if(!t)return;x.querySelectorAll(".filters__tab").forEach(r=>{const o=r===t;r.classList.toggle("filters__tab--active",o),r.setAttribute("aria-selected",o?"true":"false")}),t.dataset.filter==="bodypart"?(ne.classList.remove("hidden"),oe.textContent=" / Waist"):(ne.classList.add("hidden"),oe.textContent="")});const q={loaderOverlay:document.getElementById("loader-overlay"),loaderBg:document.getElementById("bg-loader")};function re(){q.loaderOverlay&&q.loaderOverlay.classList.add("hidden"),q.loaderBg&&q.loaderBg.classList.remove("bg-loader")}let c=null,ie=!1;const H={};function Ne(e,t,n){H[e]={getContent:t,init:n}}function w(){ie||(c={modal:document.getElementById("modal-template"),backdrop:document.querySelector("[data-modal-close]"),closeBtn:document.querySelector(".modal-template__close-btn"),body:document.querySelector("[data-modal-body]")},ie=!0)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{w()}):w();function we(){document.querySelectorAll("[data-modal]").forEach(t=>{if(t.hasAttribute("data-modal-initialized"))return;const n=t.getAttribute("data-modal");if(!H[n]){console.warn(`Modal type "${n}" is not registered`);return}t.addEventListener("click",()=>{const{getContent:r,init:o}=H[n],i=r();if(!i){console.error(`Failed to get content for modal type "${n}"`);return}ke(i),o&&setTimeout(async()=>{try{await o(B)}catch(a){console.error("Error initializing modal:",a)}},100)}),t.setAttribute("data-modal-initialized","true")})}function ke(e){var t,n;if(w(),!c||!c.modal||!c.body){console.error("Modal template elements not found");return}if(typeof e=="string")c.body.innerHTML=e;else if(e instanceof HTMLElement)c.body.innerHTML="",c.body.appendChild(e);else{console.error("Invalid content type. Expected string or HTMLElement");return}c.modal.classList.remove("hidden"),document.body.classList.add("modal-open"),document.addEventListener("keydown",ge,{once:!1}),(t=c.backdrop)==null||t.addEventListener("click",pe),(n=c.closeBtn)==null||n.addEventListener("click",Ie)}function B(){var e,t;w(),!(!c||!c.modal)&&(c.modal.classList.add("hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",ge),(e=c.backdrop)==null||e.removeEventListener("click",pe),(t=c.closeBtn)==null||t.removeEventListener("click",Ie),c&&c.body&&(c.body.innerHTML=""))}function F(){const e=document.getElementById("modal-confirm");return e&&!e.classList.contains("hidden")}function ge(e){if(e.key==="Escape"){if(F())return;B()}}function pe(e){if(e.target===c.backdrop){if(F())return;B()}}function Ie(){F()||B()}let l=null,X=null,Q=null;function G(){var t,n,r,o,i,a;if(l)return;const e=document.getElementById("modal-confirm");if(!e){console.error("Confirm modal not found");return}l={modal:e,backdrop:e.querySelector("[data-confirm-close]"),message:e.querySelector("[data-confirm-message]"),cancelBtn:e.querySelector("[data-confirm-cancel]"),confirmBtn:e.querySelector("[data-confirm-ok]")},(t=l.backdrop)==null||t.removeEventListener("click",ae,{capture:!0}),(n=l.cancelBtn)==null||n.removeEventListener("click",k,{capture:!0}),(r=l.confirmBtn)==null||r.removeEventListener("click",se,{capture:!0}),(o=l.backdrop)==null||o.addEventListener("click",ae,{capture:!0}),(i=l.cancelBtn)==null||i.addEventListener("click",k,{capture:!0}),(a=l.confirmBtn)==null||a.addEventListener("click",se,{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",G):G();function Be(e){e.key==="Escape"&&l&&!l.modal.classList.contains("hidden")&&k()}function ae(e){e.target===l.backdrop&&(e.stopPropagation(),e.preventDefault(),k(e))}function k(e){e&&(e.stopPropagation(),e.preventDefault());const t=Q;ye(),t&&t()}function se(e){e&&(e.stopPropagation(),e.preventDefault());const t=X;ye(),setTimeout(()=>{t&&t()},0)}function Pe(e,t,n=null){if(G(),!l||!l.modal){console.error("Confirm modal elements not found");return}X=t,Q=n,l.message&&(l.message.textContent=e),l.modal.classList.remove("hidden"),document.addEventListener("keydown",Be,{once:!0})}function ye(){!l||!l.modal||(l.modal.classList.add("hidden"),X=null,Q=null)}const xe=new U;let L=null;function De(){const e=document.querySelector(".rating-modal");if(!e)return console.error("Rating modal HTML not found. Make sure modal-rating.html is loaded via <load> tag."),null;const t=e.cloneNode(!0);return He(t),t}function ce(){document.addEventListener("click",function(e){const t=e.target.closest('[data-modal="rating"]');if(t){const n=t.getAttribute("data-exercise-id");n&&sessionStorage.setItem("ratingModalExerciseId",n)}},{capture:!0})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ce):ce();function He(e){const t=e.querySelectorAll("[id]"),n=Date.now();t.forEach(r=>{const o=r.id;r.id=`${o}-${n}`,e.querySelectorAll(`label[for="${o}"]`).forEach(a=>{a.setAttribute("for",r.id)})})}function le(){const e=document.querySelector("[data-modal-body]"),t=e==null?void 0:e.querySelector(".rating-modal");if(!t)return;const n=t.querySelector(".rating-modal__form"),r=t.querySelector('input[name="rating"]'),o=t.querySelector(".rating-modal__rating-text"),i=t.querySelector('input[name="email"]'),a=t.querySelector('textarea[name="comment"]'),u=t.querySelectorAll(".rating-star");n&&n.reset(),r&&(r.value="0"),i&&(i.value=""),a&&(a.value=""),o&&(o.textContent=""),u.forEach(d=>{d.classList.remove("active")})}function D(e){L&&L()?Pe("Are you sure you want to cancel your exercise review?",()=>{le(),L=null,e()},()=>{}):(le(),L=null,e())}function Ge(e){var V;L=null;const t=document.querySelector("[data-modal-body]"),n=t==null?void 0:t.querySelector(".rating-modal");if(!t||!n){console.error("Modal body or rating modal not found");return}let r=sessionStorage.getItem("ratingModalExerciseId")||((V=document.querySelector('[data-modal="rating"][data-exercise-id]'))==null?void 0:V.getAttribute("data-exercise-id"));if(r&&sessionStorage.removeItem("ratingModalExerciseId"),!r){C("Exercise ID is missing");return}const o=n.querySelectorAll(".rating-star"),i=n.querySelector('input[name="rating"]'),a=n.querySelector(".rating-modal__rating-text"),u=n.querySelector(".rating-modal__btn--cancel"),d=n.querySelector('.rating-modal__btn[type="submit"]'),I=n.querySelector('input[name="email"]'),y=n.querySelector('textarea[name="comment"]'),v=n.querySelector(".rating-modal__form");let b=0;d&&(d.disabled=!0),i&&(i.value="0"),a&&(a.textContent="0");const W=()=>b>0&&b<=5&&(I==null?void 0:I.value.trim())!==""&&(y==null?void 0:y.value.trim())!=="",Y=()=>{d&&(d.disabled=!W())};L=()=>b>0||(I==null?void 0:I.value.trim())!==""||(y==null?void 0:y.value.trim())!=="";const Se=s=>{o.forEach((f,E)=>{E+1<=s?f.classList.add("active"):f.classList.remove("active")})};o.forEach((s,f)=>{const E=f+1;s.addEventListener("click",()=>{b=E,Se(E),i&&(i.value=E),a&&(a.textContent=E),Y()})}),[I,y].forEach(s=>{s&&s.addEventListener("input",Y)});const S=document.querySelector("[data-modal-close]"),P=()=>{const s=document.getElementById("modal-confirm");return s&&!s.classList.contains("hidden")},j=s=>{if(s.key==="Escape"){if(P())return;s.stopPropagation(),D(()=>{O(),e()})}},z=s=>{if(s.target===S){if(P())return;s.stopPropagation(),D(()=>{O(),e()})}},O=()=>{document.removeEventListener("keydown",j,{capture:!0}),S==null||S.removeEventListener("click",z,{capture:!0}),T==null||T.removeEventListener("click",J,{capture:!0})},T=document.querySelector(".modal-template__close-btn"),J=s=>{P()||(s.stopPropagation(),K())};document.addEventListener("keydown",j,{capture:!0}),S==null||S.addEventListener("click",z,{capture:!0}),T==null||T.addEventListener("click",J,{capture:!0});const K=()=>{D(()=>{O(),e()})};u&&e&&u.addEventListener("click",()=>{K()}),v&&(v.setAttribute("data-no-auto-close","true"),v.addEventListener("submit",async s=>{if(s.preventDefault(),!W()){C("Please fill in all fields");return}const f=new FormData(v),E=parseInt(f.get("rating"),10),Z=f.get("email").trim(),Le=f.get("comment").trim();d&&(d.disabled=!0,d.textContent="Sending...");try{await xe.rateExercise(r,{rate:E,email:Z,review:Le}),_e("Thank you for your feedback!"),L=null,setTimeout(()=>{e&&(O(),e())},1e3)}catch(ee){console.error("Failed to submit rating:",ee),C(ee.message||g.API_ERROR),d&&(d.disabled=!1,d.textContent="Send")}}))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{re(),de()}):(re(),de());function de(){Ne(Ce.RATING,De,Ge),we()}
//# sourceMappingURL=main-CRjTWk3m.js.map
