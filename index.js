import{l as u,Y as I,s as T,a as d,i as E,c as q,r as M,V as k,b as A,d as P,e as L,f as F,g as R,h as N,M as S,j,k as U}from"./assets/modal-rating-content-_SxInZmO.js";import{i as Y}from"./assets/vendor-3BNOZKAJ.js";function D(){const e=document.querySelector(".filters__input"),t=document.querySelector(".filters__search-btn"),s=document.querySelector(".filters__clear-btn");if(!e||!t)return;e.value="";const n=()=>{const r=e.value.trim();if(console.log(r),!r){Y.warning({title:"Attention",message:"Enter a search query",position:"topRight"});return}u({page:1,keyword:r})};t.addEventListener("click",n),e.addEventListener("keydown",r=>{r.key==="Enter"&&(r.preventDefault(),n())}),s&&s.addEventListener("click",()=>{e.value="",e.focus(),u({page:1,keyword:""})})}function B(){const e=document.querySelector(".filters__input");e&&(e.value="")}function $(e){return function(t){t.preventDefault(),document.getElementById("cards-box").classList.add("hidden"),document.getElementById("exercises").classList.remove("hidden"),B();const i={Muscles:"muscles","Body parts":"body-parts",Equipment:"equipment"}[e.filter]||"body-parts";u({page:1,type:i,filter:e.name.toLowerCase(),keyword:""})}}const O=new I,_=window.innerWidth<768?9:12;let p="Muscles",y=1;async function h(e=p,t=1,s=_){p=e,y=t;try{const n={filter:e,page:t,limit:s};T();const r=await O.getFilters(n);if(!r){d("Failed to fetch categories: No response from server"),f(),m();return}if(r.error||r.status==="error"){d(r.message||"Failed to fetch categories"),f(),m();return}if(!r.results||r.results.length===0){d("Nothing found"),f(),m();return}const i=r.results||[],o=r.totalPages||1;H(i),z(y,o),typeof E=="function"&&E(r)}catch(n){console.error("getCategories error:",n),d((n==null?void 0:n.message)||"Something went wrong"),f(),m()}finally{q()}}function H(e){const t=document.getElementById("cards-container");t&&(t.innerHTML="",e.forEach(s=>{const n=document.createElement("div");n.className="card";const r=s.imgURL&&s.imgURL.trim()!==""?s.imgURL:"/img/no-image.jpg",i=s.name||"",o=s.filter||"";n.innerHTML=`
      <img src="${r}" alt="${i}" loading="lazy" />
      <div class="card-body">
        <h3>${i}</h3>
        <span>${o}</span>
      </div>
    `,n.addEventListener("click",()=>$(s)),t.appendChild(n),n.querySelector(".card-body").addEventListener("click",()=>{G(i)})}))}function z(e,t){const s=document.getElementById("pagination");s&&M({container:s,currentPage:e,totalPages:t,mode:"neighbors",showPrevNext:t>2,showArrows:t>3,classes:{page:"pagination-page",active:"active",prev:"pagination-page-prev",next:"pagination-page-next"},icons:{prev:"<",next:">"},scrollToTop:!1,onPageChange(n){var r;return y=n,(r=document.querySelector(".filters__controls"))==null||r.scrollIntoView({behavior:"smooth"}),h(p,n,_)}})}function f(){const e=document.getElementById("cards-container");e&&(e.innerHTML="")}function m(){const e=document.getElementById("pagination");e&&(e.innerHTML="")}function G(e){const t=document.querySelector(".filters__search"),s=document.getElementById("cards-box"),n=document.getElementById("exercises"),i=document.querySelector("[data-filters-tabs]").querySelector(".filters__tab--active"),o=i?i.dataset.filter:null;s&&s.classList.add("hidden"),n&&n.classList.remove("hidden"),t&&t.classList.add("filters__search--visible");const a=document.querySelector(".filters__subtitle");a?a.textContent=e.charAt(0).toUpperCase()+e.slice(1):a.textContent="",B(),u({page:1,filter:e,type:o,keyword:""})}h(p,y,_);const c=document.querySelector("[data-filters-tabs]"),v=document.querySelector(".filters__search"),b=document.querySelector(".filters__subtitle");function C(e,t=""){if(!v||!b)return;const s=t?t.charAt(0).toUpperCase()+t.slice(1):"";e==="bodypart"&&(b.textContent=` / ${s}`,typeof renderExercises=="function"&&renderExercises(window.exercisesList||[]))}function W(e,t=""){if(!c)return;v&&v.classList.remove("filters__search--visible");const s=c.querySelector(`[data-filter="${e}"]`);if(!s)return;const n=document.getElementById("cards-box"),r=document.getElementById("exercises"),i=document.getElementById("equipment-box");n&&n.classList.add("hidden"),r&&r.classList.add("hidden"),i&&i.classList.add("hidden"),e==="muscles"?(h("Muscles"),n&&n.classList.remove("hidden")):e==="equipment"?i&&i.classList.remove("hidden"):e==="bodypart"&&(h("Body parts"),n&&n.classList.remove("hidden")),c.querySelectorAll(".filters__tab").forEach(o=>{const a=o===s;o.classList.toggle("filters__tab--active",a),o.setAttribute("aria-selected",a?"true":"false")}),C(e,t)}if(c&&v&&b){c.addEventListener("click",t=>{const s=t.target.closest(".filters__tab");s&&W(s.dataset.filter)});const e=c.querySelector(".filters__tab--active");e&&C(e.dataset.filter)}const l=document.querySelector(".filters__input"),g=document.querySelector(".filters__clear-btn");if(l&&g){const e=()=>{l.value.trim()?g.classList.add("filters__clear-btn--visible"):g.classList.remove("filters__clear-btn--visible")};l.addEventListener("input",e),g.addEventListener("click",()=>{l.value="",l.focus(),e()}),e()}const w=document.querySelector(".footer__form"),x=w.querySelector(".footer__input");w.addEventListener("submit",async e=>{e.preventDefault();const t=x.value.trim();if(!(!t||!k.EMAIL_REGEX.test(t)))try{const s=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(s.ok)A("We're excited to have you on board! ðŸŽ‰ Thank you for subscribing to new exercises on Your Energy. You've just taken a significant step towards improving your fitness and well-being."),x.value="";else{const n=await s.json();P("Subscription already exists")}}catch{d("Server error")}});function X(){document.querySelector(".js-exercises-tabs")}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>q(),300),J()});function J(){L(S.RATING,N,R),L(S.EXERCISE,U,j),F()}u();X();D();
//# sourceMappingURL=index.js.map
