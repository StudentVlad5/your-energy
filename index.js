import{l as d,Y as M,s as k,a as u,i as b,c as x,V as P,b as T,d as A,r as _,e as R,f as N,g as F,M as w,h as j,j as D}from"./assets/modal-rating-content-BuOkZOrQ.js";import{i as Y}from"./assets/vendor-3BNOZKAJ.js";const c=document.querySelector("[data-filters-tabs]"),f=document.querySelector(".filters__search"),y=document.querySelector(".filters__subtitle"),U=()=>window.matchMedia("(min-width: 1440px)").matches;function B(e,n=""){if(!f||!y)return;const t=U();e==="bodypart"?(y.textContent=` / ${n||"Waist"}`,typeof renderExercises=="function"&&renderExercises(window.exercisesList||[]),f.classList.add("filters__search--visible")):(y.textContent="",f.classList.remove("filters__search--visible"))}function C(e,n=""){if(!c)return;const t=c.querySelector(`[data-filter="${e}"]`);if(!t)return;const r=document.getElementById("cards-box"),s=document.getElementById("exercises"),o=document.getElementById("equipment-box");r&&r.classList.add("hidden"),s&&s.classList.add("hidden"),o&&o.classList.add("hidden");const i=new URL(window.location.href);e==="muscles"?(r&&r.classList.remove("hidden"),i.searchParams.delete("filter"),i.searchParams.delete("type")):e==="equipment"?(o&&o.classList.remove("hidden"),i.searchParams.delete("filter"),i.searchParams.delete("type")):e==="bodypart"&&(s&&s.classList.remove("hidden"),i.searchParams.set("type","body-parts"),n?i.searchParams.set("filter",n.toLowerCase()):(i.searchParams.delete("filter"),d({page:1}))),window.history.pushState({},"",i),c.querySelectorAll(".filters__tab").forEach(a=>{const E=a===t;a.classList.toggle("filters__tab--active",E),a.setAttribute("aria-selected",E?"true":"false")}),B(e,n)}if(c&&f&&y){c.addEventListener("click",n=>{const t=n.target.closest(".filters__tab");t&&C(t.dataset.filter)});const e=c.querySelector(".filters__tab--active");e&&B(e.dataset.filter)}const l=document.querySelector(".filters__input"),g=document.querySelector(".filters__clear-btn");if(l&&g){const e=()=>{l.value.trim()?g.classList.add("filters__clear-btn--visible"):g.classList.remove("filters__clear-btn--visible")};l.addEventListener("input",e),g.addEventListener("click",()=>{l.value="",l.focus(),e()}),e()}function $(e){return function(n){n.preventDefault();const t={Muscles:"muscles","Body parts":"body-parts",Equipment:"equipment"},r=t[e.filter]||t["Body parts"];document.getElementById("cards-box").classList.add("hidden"),document.getElementById("exercises").classList.remove("hidden"),C("bodypart",e.name),d({page:1,filter:e.name.toLowerCase(),type:r});const i=new URL(window.location.href);i.searchParams.set("type",r),i.searchParams.set("filter",e.name.toLowerCase()),window.history.pushState({},"",i)}}const H=new M,L=window.innerWidth<768?9:12;let v="Muscles",m=1;async function I(e=v,n=1,t=L){v=e,m=n;try{const r={filter:e,page:n,limit:t};k();const s=await H.getFilters(r);if(!s){u("Failed to fetch categories: No response from server"),p(),h();return}if(s.error||s.status==="error"){u(s.message||"Failed to fetch categories"),p(),h();return}if(!s.results||s.results.length===0){u("Nothing found"),p(),h();return}const o=s.results||[],i=s.totalPages||1;O(o),G(m,i),typeof b=="function"&&b(s)}catch(r){console.error("getCategories error:",r),u((r==null?void 0:r.message)||"Something went wrong"),p(),h()}finally{x()}}function O(e){const n=document.getElementById("cards-container");n&&(n.innerHTML="",e.forEach(t=>{const r=document.createElement("div");r.className="card";const s=t.imgURL&&t.imgURL.trim()!==""?t.imgURL:"/img/no-image.jpg",o=t.name||"",i=t.filter||"";r.innerHTML=`
      <img src="${s}" alt="${o}" loading="lazy" />
      <div class="card-body">
        <h3>${o}</h3>
        <span>${i}</span>
      </div>
    `,r.addEventListener("click",$(t)),n.appendChild(r),r.querySelector(".card-body").addEventListener("click",()=>{W(o)})}))}function G(e,n){const t=document.getElementById("pagination");if(t){t.innerHTML="";for(let r=1;r<=n;r++){const s=r,o=document.createElement("button");o.textContent=s,o.className="pagination-page",o.setAttribute("data-page",s),s===e&&o.classList.add("active");const i=document.getElementById("cards-box");o.addEventListener("click",()=>{if(s!==m)if(m=s,I(v,s,L),i){const a=i.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:a-200,behavior:"smooth"})}else window.scrollTo({top:0,behavior:"smooth"})}),t.appendChild(o)}}}function p(){const e=document.getElementById("cards-container");e&&(e.innerHTML="")}function h(){const e=document.getElementById("pagination");e&&(e.innerHTML="")}function W(e){console.log("Clicked name:",e)}I(v,m,L);const q=document.querySelector(".footer__form"),S=q.querySelector(".footer__input");q.addEventListener("submit",async e=>{e.preventDefault();const n=S.value.trim();if(!(!n||!P.EMAIL_REGEX.test(n)))try{const t=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})});if(t.ok)T("We're excited to have you on board! ðŸŽ‰ Thank you for subscribing to new exercises on Your Energy. You've just taken a significant step towards improving your fitness and well-being."),S.value="";else{const r=await t.json();A("Subscription already exists")}}catch{u("Server error")}});function z(){const e=document.querySelector(".js-exercises-tabs");e&&(e.querySelectorAll(".exercises__tab"),document.querySelector(".exercises__search-input"),tab.addEventListener("click",()=>{var n,t;(n=document.getElementById("categories-section"))==null||n.classList.add("hidden"),(t=document.getElementById("exercises-section"))==null||t.classList.remove("hidden"),d({page:1})}))}function X(){const e=document.querySelector(".filters__input"),n=document.querySelector(".filters__search-btn"),t=document.querySelector(".filters__clear-btn");if(!e||!n)return;const r=()=>{const s=e.value.trim();if(console.log(s),!s){Y.warning({title:"Attention",message:"Enter a search query",position:"topRight"});return}d({page:1,keyword:s})};n.addEventListener("click",r),e.addEventListener("keydown",s=>{s.key==="Enter"&&(s.preventDefault(),r())}),t&&t.addEventListener("click",()=>{e.value="",e.focus(),d({page:1,keyword:""})})}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>x(),300),J()});function J(){_(w.RATING,F,N),_(w.EXERCISE,D,j),R()}d();z();X();
//# sourceMappingURL=index.js.map
