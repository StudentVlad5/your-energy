import{l,Y as C,s as I,a as d,i as _,c as w,r as T,V as M,b as k,d as P,e as L,f as A,g as R,h as F,M as S,j as N,k as j}from"./assets/modal-rating-content-WV6nwhUN.js";import{i as U}from"./assets/vendor-3BNOZKAJ.js";function Y(){const e=document.querySelector(".filters__input"),n=document.querySelector(".filters__search-btn"),t=document.querySelector(".filters__clear-btn");if(!e||!n)return;e.value="";const s=()=>{const r=e.value.trim();if(console.log(r),!r){U.warning({title:"Attention",message:"Enter a search query",position:"topRight"});return}l({page:1,keyword:r})};n.addEventListener("click",s),e.addEventListener("keydown",r=>{r.key==="Enter"&&(r.preventDefault(),s())}),t&&t.addEventListener("click",()=>{e.value="",e.focus(),l({page:1,keyword:""})})}function D(){const e=document.querySelector(".filters__input");e&&(e.value="")}function $(e){return function(n){n.preventDefault(),document.getElementById("cards-box").classList.add("hidden"),document.getElementById("exercises").classList.remove("hidden"),D();const i={Muscles:"muscles","Body parts":"body-parts",Equipment:"equipment"}[e.filter]||"body-parts";l({page:1,type:i,filter:e.name.toLowerCase(),keyword:""});const o=new URL(window.location.href);o.searchParams.set("type",i),o.searchParams.set("filter",e.name.toLowerCase()),o.searchParams.delete("keyword"),window.history.pushState({},"",o)}}const O=new C,E=window.innerWidth<768?9:12;let g="Muscles",p=1;async function y(e=g,n=1,t=E){g=e,p=n;try{const s={filter:e,page:n,limit:t};I();const r=await O.getFilters(s);if(!r){d("Failed to fetch categories: No response from server"),u(),f();return}if(r.error||r.status==="error"){d(r.message||"Failed to fetch categories"),u(),f();return}if(!r.results||r.results.length===0){d("Nothing found"),u(),f();return}const i=r.results||[],o=r.totalPages||1;H(i),z(p,o),typeof _=="function"&&_(r)}catch(s){console.error("getCategories error:",s),d((s==null?void 0:s.message)||"Something went wrong"),u(),f()}finally{w()}}function H(e){const n=document.getElementById("cards-container");n&&(n.innerHTML="",e.forEach(t=>{const s=document.createElement("div");s.className="card";const r=t.imgURL&&t.imgURL.trim()!==""?t.imgURL:"/img/no-image.jpg",i=t.name||"",o=t.filter||"";s.innerHTML=`
      <img src="${r}" alt="${i}" loading="lazy" />
      <div class="card-body">
        <h3>${i}</h3>
        <span>${o}</span>
      </div>
    `,s.addEventListener("click",()=>$(t)),n.appendChild(s),s.querySelector(".card-body").addEventListener("click",()=>{G(i)})}))}function z(e,n){const t=document.getElementById("pagination");t&&T({container:t,currentPage:e,totalPages:n,mode:"neighbors",showPrevNext:n>2,classes:{page:"pagination-page",active:"active",prev:"pagination-page-prev",next:"pagination-page-next"},icons:{prev:"<",next:">"},scrollToTop:!0,scrollTarget:".main-container",onPageChange(s){return p=s,y(g,s,E)}})}function u(){const e=document.getElementById("cards-container");e&&(e.innerHTML="")}function f(){const e=document.getElementById("pagination");e&&(e.innerHTML="")}function G(e){const n=document.querySelector(".filters__search"),t=document.getElementById("cards-box"),s=document.getElementById("exercises"),i=document.querySelector("[data-filters-tabs]").querySelector(".filters__tab--active"),o=i?i.dataset.filter:null;t&&t.classList.add("hidden"),s&&s.classList.remove("hidden"),n&&n.classList.add("filters__search--visible"),l({page:1,filter:e,type:o})}y(g,p,E);const a=document.querySelector("[data-filters-tabs]"),h=document.querySelector(".filters__search"),b=document.querySelector(".filters__subtitle");function B(e,n=""){if(!h||!b)return;const t=n?n.charAt(0).toUpperCase()+n.slice(1):"Waist";e==="bodypart"&&(b.textContent=` / ${t}`,typeof renderExercises=="function"&&renderExercises(window.exercisesList||[]))}function W(e,n=""){if(!a)return;h&&h.classList.remove("filters__search--visible");const t=a.querySelector(`[data-filter="${e}"]`);if(!t)return;const s=document.getElementById("cards-box"),r=document.getElementById("exercises"),i=document.getElementById("equipment-box");s&&s.classList.add("hidden"),r&&r.classList.add("hidden"),i&&i.classList.add("hidden"),e==="muscles"?(y("Muscles"),s&&s.classList.remove("hidden")):e==="equipment"?i&&i.classList.remove("hidden"):e==="bodypart"&&(y("Body parts"),s&&s.classList.remove("hidden")),a.querySelectorAll(".filters__tab").forEach(o=>{const v=o===t;o.classList.toggle("filters__tab--active",v),o.setAttribute("aria-selected",v?"true":"false")}),B(e,n)}if(a&&h&&b){a.addEventListener("click",n=>{const t=n.target.closest(".filters__tab");t&&W(t.dataset.filter)});const e=a.querySelector(".filters__tab--active");e&&B(e.dataset.filter)}const c=document.querySelector(".filters__input"),m=document.querySelector(".filters__clear-btn");if(c&&m){const e=()=>{c.value.trim()?m.classList.add("filters__clear-btn--visible"):m.classList.remove("filters__clear-btn--visible")};c.addEventListener("input",e),m.addEventListener("click",()=>{c.value="",c.focus(),e()}),e()}const q=document.querySelector(".footer__form"),x=q.querySelector(".footer__input");q.addEventListener("submit",async e=>{e.preventDefault();const n=x.value.trim();if(!(!n||!M.EMAIL_REGEX.test(n)))try{const t=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})});if(t.ok)k("We're excited to have you on board! ðŸŽ‰ Thank you for subscribing to new exercises on Your Energy. You've just taken a significant step towards improving your fitness and well-being."),x.value="";else{const s=await t.json();P("Subscription already exists")}}catch{d("Server error")}});function X(){document.querySelector(".js-exercises-tabs")}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>w(),300),J()});function J(){L(S.RATING,F,R),L(S.EXERCISE,j,N),A()}l();X();Y();
//# sourceMappingURL=index.js.map
