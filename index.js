import{S as u,l as d,Y as M,s as f,V as q,a as P,b as A,c as k,r as b,i as R,d as N,g as Y,M as v,e as D,f as H}from"./assets/modal-rating-content-B6KEbmQS.js";import{i as O}from"./assets/vendor-3BNOZKAJ.js";function w(e){if(!e||!e.results)return;const s={"@context":u.SCHEMA_CONTEXT,"@type":u.SCHEMA_TYPES.ITEM_LIST,itemListElement:e.results.map((t,r)=>({"@type":u.SCHEMA_TYPES.LIST_ITEM,position:r+1,item:{"@type":u.SCHEMA_TYPES.EXERCISE_PLAN,name:t.name,filter:t.filter,image:t.imgURL}}))};F("filters",s)}function F(e,s){let t=document.querySelector(`script[data-schema="${e}"]`);t||(t=document.createElement("script"),t.type=u.JSON_LD_TYPE,t.setAttribute("data-schema",e),document.head.appendChild(t)),t.textContent=JSON.stringify(s)}const c=document.querySelector("[data-filters-tabs]"),m=document.querySelector(".filters__search"),E=document.querySelector(".filters__subtitle"),U=()=>window.matchMedia("(min-width: 1440px)").matches;function C(e,s=""){if(!m||!E)return;const t=U();e==="bodypart"?(E.textContent=` / ${s||"Waist"}`,typeof renderExercises=="function"&&renderExercises(window.exercisesList||[]),m.classList.add("filters__search--visible")):(E.textContent="",m.classList.remove("filters__search--visible"))}function T(e,s=""){if(!c)return;const t=c.querySelector(`[data-filter="${e}"]`);if(!t)return;const r=document.getElementById("cards-box"),n=document.getElementById("exercises"),o=document.getElementById("equipment-box");r&&r.classList.add("hidden"),n&&n.classList.add("hidden"),o&&o.classList.add("hidden");const i=new URL(window.location.href);e==="muscles"?(r&&r.classList.remove("hidden"),i.searchParams.delete("filter"),i.searchParams.delete("type")):e==="equipment"?(o&&o.classList.remove("hidden"),i.searchParams.delete("filter"),i.searchParams.delete("type")):e==="bodypart"&&(n&&n.classList.remove("hidden"),i.searchParams.set("type","body-parts"),s?i.searchParams.set("filter",s.toLowerCase()):(i.searchParams.delete("filter"),d({page:1}))),window.history.pushState({},"",i),c.querySelectorAll(".filters__tab").forEach(a=>{const S=a===t;a.classList.toggle("filters__tab--active",S),a.setAttribute("aria-selected",S?"true":"false")}),C(e,s)}if(c&&m&&E){c.addEventListener("click",s=>{const t=s.target.closest(".filters__tab");t&&T(t.dataset.filter)});const e=c.querySelector(".filters__tab--active");e&&C(e.dataset.filter)}const l=document.querySelector(".filters__input"),g=document.querySelector(".filters__clear-btn");if(l&&g){const e=()=>{l.value.trim()?g.classList.add("filters__clear-btn--visible"):g.classList.remove("filters__clear-btn--visible")};l.addEventListener("input",e),g.addEventListener("click",()=>{l.value="",l.focus(),e()}),e()}function $(e){return function(s){s.preventDefault();const t={Muscles:"muscles","Body parts":"body-parts",Equipment:"equipment"},r=t[e.filter]||t["Body parts"];document.getElementById("cards-box").classList.add("hidden"),document.getElementById("exercises").classList.remove("hidden"),T("bodypart",e.name),d({page:1,filter:e.name.toLowerCase(),type:r});const i=new URL(window.location.href);i.searchParams.set("type",r),i.searchParams.set("filter",e.name.toLowerCase()),window.history.pushState({},"",i)}}const j=new M,_=window.innerWidth<768?9:12;let L="Muscles",p=1;async function I(e=L,s=1,t=_){L=e,p=s;try{const r={filter:e,page:s,limit:t},n=await j.getFilters(r);if(!n){f("Failed to fetch categories: No response from server"),y(),h();return}if(n.error||n.status==="error"){f(n.message||"Failed to fetch categories"),y(),h();return}if(!n.results||n.results.length===0){f("Nothing found"),y(),h();return}const o=n.results||[],i=n.totalPages||1;X(o),G(p,i),typeof w=="function"&&w(n)}catch(r){console.error("getCategories error:",r),f((r==null?void 0:r.message)||"Something went wrong"),y(),h()}}function X(e){const s=document.getElementById("cards-container");s&&(s.innerHTML="",e.forEach(t=>{const r=document.createElement("div");r.className="card";const n=t.imgURL&&t.imgURL.trim()!==""?t.imgURL:"/img/no-image.jpg",o=t.name||"",i=t.filter||"";r.innerHTML=`
      <img src="${n}" alt="${o}" loading="lazy" />
      <div class="card-body">
        <h3>${o}</h3>
        <span>${i}</span>
      </div>
    `,r.addEventListener("click",$(t)),s.appendChild(r),r.querySelector(".card-body").addEventListener("click",()=>{J(o)})}))}function G(e,s){const t=document.getElementById("pagination");if(t){t.innerHTML="";for(let r=1;r<=s;r++){const n=r,o=document.createElement("button");o.textContent=n,o.className="pagination-page",o.setAttribute("data-page",n),n===e&&o.classList.add("active"),o.addEventListener("click",()=>{n!==p&&(p=n,I(L,n,_),setTimeout(()=>{const i=document.getElementById("cards-box");if(i){const a=i.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:a-20,behavior:"smooth"})}},100))}),t.appendChild(o)}}}function y(){const e=document.getElementById("cards-container");e&&(e.innerHTML="")}function h(){const e=document.getElementById("pagination");e&&(e.innerHTML="")}function J(e){console.log("Clicked name:",e)}I(L,p,_);const B=document.querySelector(".footer__form"),x=B.querySelector(".footer__input");B.addEventListener("submit",async e=>{e.preventDefault();const s=x.value.trim();if(!(!s||!q.EMAIL_REGEX.test(s)))try{const t=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})});if(t.ok)P("We're excited to have you on board! ðŸŽ‰ Thank you for subscribing to new exercises on Your Energy. You've just taken a significant step towards improving your fitness and well-being."),x.value="";else{const r=await t.json();A("Subscription already exists")}}catch{f("Server error")}});function W(){const e=document.querySelector(".js-exercises-tabs");e&&(e.querySelectorAll(".exercises__tab"),document.querySelector(".exercises__search-input"),tab.addEventListener("click",()=>{var s,t;(s=document.getElementById("categories-section"))==null||s.classList.add("hidden"),(t=document.getElementById("exercises-section"))==null||t.classList.remove("hidden"),d({page:1})}))}function z(){const e=document.querySelector(".filters__input"),s=document.querySelector(".filters__search-btn"),t=document.querySelector(".filters__clear-btn");if(!e||!s)return;const r=()=>{const n=e.value.trim();if(console.log(n),!n){O.warning({title:"Attention",message:"Enter a search query",position:"topRight"});return}d({page:1,keyword:n})};s.addEventListener("click",r),e.addEventListener("keydown",n=>{n.key==="Enter"&&(n.preventDefault(),r())}),t&&t.addEventListener("click",()=>{e.value="",e.focus(),d({page:1,keyword:""})})}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>k(),300),Q()});function Q(){b(v.RATING,Y,N),b(v.EXERCISE,H,D),R()}d();W();z();
//# sourceMappingURL=index.js.map
